<div class="notifications-page">
  <div class="notifications-header card mb-4 p-4">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h2 class="mb-1">Notifications</h2>
        <div class="small text-muted">{{ notifications.length || 0 }} notifications</div>
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-outline-primary btn-sm" (click)="markAllRead()" [disabled]="!hasUnreadNotifications()">
          <i class="bi bi-check-all me-1"></i>
          Mark All Read
        </button>
        <button class="btn btn-outline-secondary btn-sm" (click)="refreshNotifications()">
          <i class="bi bi-arrow-clockwise me-1"></i>
          Refresh
        </button>
      </div>
    </div>
  </div>

  <div class="notifications-list">
    <div class="notification-item card mb-3 p-3" 
         *ngFor="let notification of notifications" 
         [class.unread]="!notification.read"
         [class.priority-high]="notification.priority === 'high'"
         [class.priority-urgent]="notification.priority === 'urgent'">
      
      <div class="d-flex gap-3 align-items-start">
        <div class="notification-icon">
          <i class="bi" [ngClass]="getNotificationIcon(notification.type)"></i>
        </div>
        
        <div class="flex-grow-1">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <div class="notification-title fw-semibold">{{ notification.title || notification.type }}</div>
            <div class="notification-time small text-muted">{{ formatTime(notification.createdAt) }}</div>
          </div>
          
          <div class="notification-message text-secondary mb-2">{{ notification.message || notification.body }}</div>
          
          <div class="d-flex align-items-center gap-2 mb-3">
            <span class="badge" [ngClass]="getPriorityClass(notification.priority)">{{ notification.priority }}</span>
            <span class="badge bg-secondary">{{ notification.category }}</span>
            <span class="badge bg-light text-dark" *ngIf="!notification.read">New</span>
          </div>
          
          <div class="notification-actions d-flex gap-2">
            <button *ngIf="!notification.read" 
                    class="btn btn-sm btn-outline-primary" 
                    (click)="markAsRead(notification)">
              <i class="bi bi-check me-1"></i>
              Mark as Read
            </button>
            
            <button *ngIf="notification.data?.sessionId && (notification.data?.joinToken || notification.data?.meetingUrl)" 
                    class="btn btn-sm btn-primary" 
                    (click)="joinFromNotification(notification)">
              <i class="bi bi-camera-video me-1"></i>
              Join Session
            </button>
            
            <button class="btn btn-sm btn-outline-danger" 
                    (click)="deleteNotification(notification)">
              <i class="bi bi-trash me-1"></i>
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div class="empty-notifications text-center py-5" *ngIf="!notifications || notifications.length === 0">
    <div class="empty-card">
      <i class="bi bi-bell" style="font-size: 4rem; color: #d1d5db;"></i>
      <h5 class="mt-3 text-muted">No notifications yet</h5>
      <p class="text-muted">You'll see your notifications here when they arrive.</p>
    </div>
  </div>
</div>
